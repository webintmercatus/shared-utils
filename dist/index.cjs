function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t,n,r,o=/*#__PURE__*/e(require("lodash"));exports.ConfigCategory=void 0,(n=exports.ConfigCategory||(exports.ConfigCategory={})).Setting="setting",n.Translation="translation",n.UI="ui",n.Feature="feature",exports.ConfigCategoryPlurals=void 0,(r=exports.ConfigCategoryPlurals||(exports.ConfigCategoryPlurals={})).Setting="settings",r.Translation="translations",r.UI="ui",r.Feature="features";var a=((t={})[exports.ConfigCategory.Setting]={plural:exports.ConfigCategoryPlurals.Setting,label:"Setting",labelPlural:"Settings",order:1},t[exports.ConfigCategory.Translation]={plural:exports.ConfigCategoryPlurals.Translation,label:"Translation",labelPlural:"Translations",order:2},t[exports.ConfigCategory.UI]={plural:exports.ConfigCategoryPlurals.UI,label:"UI",labelPlural:"UI",order:3},t[exports.ConfigCategory.Feature]={plural:exports.ConfigCategoryPlurals.Feature,label:"Feature",labelPlural:"Features",order:4},t),i=o.default.assign,u=o.default.mapValues,l=function(e){return void 0===e&&(e={}),e=u(e,function(){return!0}),i({nested:!1,categorized:!1,sort:!1},e)},s=o.default.fromPairs,f=o.default.sortBy,c=o.default.toPairs,d=function(e){return s(f(c(e),0))},p=o.default.each,g=o.default.setWith,v=function(e){var t={};return p(e,function(e,n){g(t,n,e,Object)}),t},b=o.default.each,h=o.default.get,y=o.default.each,m=o.default.get,C=o.default.has,x=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r={};return y(e,function(o,a){o.inherit&&(o.default=m(e,o.inherit).default);var i=C(o,"value")&&!n?o.value:o.default;if(t){var u=t(a,o),l=u.key,s=u.value;l&&(a=l),s&&(i=s)}r[a]=i}),r},P=o.default.differenceWith,O=o.default.each,w=o.default.fromPairs,k=o.default.has,j=o.default.isEqual,I=o.default.pickBy,F=o.default.toPairs,L=function(e,t){var n=w(P(F(t),F(e),j)),r=I(n,function(t,n){return!k(e,n)}),o=I(n,function(t,n){return k(e,n)}),a=w(P(F(e),F(t),j));return{added:r,changed:o,removed:I(a,function(e,n){return!k(t,n)})}};function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function U(e,t,n){return U=R()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&E(o,n.prototype),o},U.apply(null,arguments)}function _(e){var t="function"==typeof Map?new Map:void 0;return _=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return U(e,arguments,T(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),E(n,e)},_(e)}var z=o.default.assign,M=o.default.each,V=o.default.get,B=o.default.has,D=o.default.includes,W=o.default.isObject,q=o.default.kebabCase,A=o.default.last,N=o.default.mapKeys,G=o.default.mapValues,K=o.default.merge,Z=o.default.set,H=o.default.size,J=o.default.split,Q=o.default.startCase,X=o.default.unset,Y=function(e){return"object"==typeof e&&"boolean"==typeof e.default?"switch":"input"},$=function(e,t,n){if(void 0===n&&(n=!1),W(t)){if(!n&&!B(t,"default")&&!B(t,"inherit"))throw new Error('Config "'+e+'" is missing a "default" value (or "inherit" reference).')}else t={default:t};return t},ee=function(e,t,n){if(void 0===n&&(n={}),delete(t=$(e,t)).key,t.docLink){var r='Documentation on this feature can be found <a href="'+t.docLink+'">here</a>.';t.hint=t.hint?r+"<br>"+t.hint:r,delete t.docLink}if(t.inherit){var o="When unchanged, inherits value from <code>"+t.inherit+"</code>.";t.hint=t.hint?o+"<br>"+t.hint:o}return z({default:null,type:Y(t),label:Q(A(J(e,"."))),category:"setting"},t,n)},te=function(e,t,n){return void 0===t&&(t={}),e=N(e,function(e,t){return V(e,"key",t)}),G(e,function(e,r){return n&&n(r,e),ee(r,e,t)})},ne=function(e,t){return z({label:Q(A(J(e,"."))),order:0,toggleable:!1,description:null,rootKey:null},t)},re=function(e,t){var n={};return M(e,function(e){if(W(e)&&!B(e,"key"))throw new Error("Onboarder config missing key!");var r=W(e)?e.key:e;if(!B(t,r))throw new Error('Onboarder defines key "'+r+'" which does not exist.');n[r]=W(e)?z({},t[r],e):z({},t[r])}),n},oe=function(e,t){var n={};return M(e,function(e,r){n[r]={label:e.label?e.label:Q(r),configs:re(e.configs,t)}}),n},ae=function(e){var t=e.getComponents,n=e.getConfigs,r=e.getLabel,o=e.getName,a=e.getOnboarders,i=e.getOverrides,u=e.source;try{var l=function(e){function o(r){function o(e){function t(){function e(){var e=function(){if(i)return Promise.resolve(i()).then(function(e){u.overrides=e})}();return e&&e.then?e.then(function(){return u}):u}var t;M(t=u.configs,function(e,n){if(e.inherit&&!B(t,e.inherit))throw new Error('Config with key "'+n+'" has inherit property defined as "'+e.inherit+'" which is not a valid key!')});var n=function(){if(a)return Promise.resolve(a()).then(function(e){u.onboarders=function(e,t){var n={};return M(e,function(e,r){var o=e.getLabel,a=e.getTabs;n[r]={label:o?o():Q(r),tabs:a?oe(a(),t):{}}}),n}(e,u.configs)})}();return n&&n.then?n.then(e):e()}var r=function(){if(n)return Promise.resolve(n()).then(function(t){var n=te(t),r=function(e,t){void 0===t&&(t={});var n={},r=!1;return M(e,function(e){if("object"==typeof e&&B(e,"component")){if(!B(n,e.component)){var o={};if(B(t,e.component)){var a=t[e.component].getOptions;o=a?a():t[e.component]}n[e.component]=ne(e.component,o)}}else r=!0}),r&&H(n)&&(n.unsorted=ne("unsorted",{order:999})),n}(n,e);K(u,{configs:n,components:r})});var t,r,o,a=(r={},o=function(e){return G(e,function(e,t){var n=e.getOptions;return ne(t,n?n():null)})}(t=e),M(t,function(e,t){var n=function(e,n){void 0===n&&(n="setting");var a={component:t},i=function(e,t,n){void 0===n&&(n="setting");var r={group:{path:"groups"},tab:{path:"tabs"}},o=[],a=function(e,t){void 0===t&&(t=null);var n={};return M(e,function(e,r){if(e=$(r,e),t){var o=t(r,e);n[o.key]=o.config}else n[r]=e}),n},i=function(e,t){return a(t,function(t,n){return"object"==typeof n&&(n.visibleIf&&(n.visibleIf=e+"."+n.visibleIf),n.longLabel=Q(e)+" ⇢ "+(n.longLabel?n.longLabel:n.label?n.label:Q(t))),{key:e+"."+t,config:n}})},u=function(i,u,l,s,f,c){return void 0===s&&(s=!0),void 0===f&&(f="group"),D(o,i)?console.warn('"'+i+'" group already exists in "'+n+'"'):o.push(i),function(n,o,a,i){void 0===i&&(i="group");var u=r[i].path,l={};M(a,function(n){if("object"==typeof n&&n.group){var o=n.group;M(r,function(n){var r=V(e,[t,n.path,o]);if(r){Z(l,[n.path,o],r),X(e,[t,n.path,o]);var a=V(e,[t,n.path],{});0===H(a)&&X(e,[t,n.path])}})}}),Z(e,[t,u,n],z({label:o},l))}(i,u,l,f),a(l,function(e,t){return t.group=t.group?i+"."+t.group:i,c&&c(e,t),{key:s?i+"."+e:e,config:t}})};return{addNested:i,addFeature:function(e,t,n,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=!0),B(n,"enabled"))throw new Error('Feature "'+e+'" should not contain a property named "enabled".');return n=z({enabled:$("enabled",r)},n),u(e,t,n,o,"group",function(t,n){"enabled"!==t&&"object"==typeof n&&Z(n,"visibleIf",e+".enabled")})},addGroup:u,addTab:function(e,t){var r=n+"-"+q(e);return u(r,e,t,!1,"tab")},addField:function(e,t){var n={},r=e+".isVisible",o=Q(e),a=o;return n.isVisible={default:!0,label:"Visible",longLabel:o+" ⇢ Visible",styleClasses:"col-md-2"},n.required={default:!1,label:"Required",longLabel:o+" ⇢ Required",visibleIf:r,styleClasses:"col-md-2"},n.disabled={default:!1,label:"Disabled",longLabel:o+" ⇢ Disabled",visibleIf:r,styleClasses:"col-md-2"},n.hasAutoFocus={default:!1,label:"Autofocus",longLabel:o+" ⇢ Autofocus",visibleIf:r,styleClasses:"col-md-2"},n.pattern={default:"",label:"Pattern",longLabel:o+" ⇢ Pattern",visibleIf:r,styleClasses:"col-md-12"},t&&t&&t({insert:function(e,t){if(B(n,e))throw new Error("Field "+e+" already exists!");var a=ee(e,t,{visibleIf:r,styleClasses:"col-md-12"});a.longLabel=o+" ⇢ "+a.label,n[e]=a},modify:function(e,t){K(n[e],$(e,t,!0))},remove:function(e){delete n[e]},modifyLabel:function(e){a=e}}),u(e,a,n,!0)},addPluralized:function(e,t){var n={};if(t.zero&&(n[0]={default:t.zero,label:"Zero Case",hint:"When there are 0 items"}),t.one&&(n[1]={default:t.one,label:"One Case",hint:"When there is 1 item"}),t.many&&(n.other={default:t.many,label:"Many Case",hint:"When there are many items"}),H(n))return i(e,n)}}}(o,t,n);n&&(a=z(a,{category:n}));var u=e(i);if(H(u)){var l=V(o,[t,"categories"],[]);l.push(n),Z(o,[t,"categories"],l),function(e,t,n){K(e,function(e,t,n){return te(t,n,function(t){if(B(e,t))throw new Error('Duplicate key: "'+t+'"')})}(e,t,n))}(r,u,a)}},a=e.getConfigs,i=e.getFeatures,u=e.getSettings,l=e.getTranslations,s=e.getUI;a?n(a):(u&&n(u,"setting"),l&&n(l,"translation"),s&&n(s,"ui"),i&&n(i,"feature"))}),{configs:r,components:o});K(u,{configs:a.configs,components:a.components})}();return r&&r.then?r.then(t):t()}var u={name:e,label:r};return t?Promise.resolve(t()).then(o):o(null)}return r?Promise.resolve(r()).then(o):o(Q(e))};return Promise.resolve(o?Promise.resolve(o()).then(l):l(u))}catch(e){return Promise.reject(e)}},ie=/*#__PURE__*/function(e){var t,n;function r(t,n){var r;return(r=e.call(this,n.message+' ("'+t+'" source)')||this).name="SourceError",r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,E(t,n),r}(/*#__PURE__*/_(Error));exports.CATEGORIES=a,exports.SourceError=ie,exports.getDiff=function(e,t){var n=L(e,t),r={};return O(n,function(t,o){O(n[o],function(t,n){r[n]={value:t,status:o,previous:k(e,n)?e[n]:null}})}),r},exports.getDiffByStatus=L,exports.getTransformationOptions=l,exports.logMemoryUsage=function(){var e=process.memoryUsage(),t="Memory Usage\n";for(var n in e)t+=n+": "+Math.round(e[n]/1024/1024*100)/100+" MB\n";console.log(t)},exports.parseSource=ae,exports.parseSourceConfigs=function(e,t){try{return Promise.resolve(ae(S({source:e},t))).then(function(e){return e.configs})}catch(e){return Promise.reject(e)}},exports.sortObjectAlphabetically=d,exports.transformFromConfigsToResponse=x,exports.transformResponse=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=l(t),o=e;return r.sort&&(o=d(o)),r.categorized&&(o=function(e,t){void 0===t&&(t=null);var n={};return b(e,function(e,r){if(t){var o=t(r,e),a=o.key,i=o.value;a&&(r=a),i&&(e=i)}n[r]=e}),n}(o,function(e){var t=h(n,e);return t?e=a[t.category].plural+"."+e:(console.warn("Non-existent key "+e+" is not part of the config set."),e="nonexistent."+e),{key:e}})),r.nested?v(o):o},exports.transformToConfigValues=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!1);var r=l(t),o=x(e,function(e,t){return{key:e=r.categorized?a[t.category].plural+"."+e:e}},n);return r.nested?v(o):o},exports.transformToNested=v;
//# sourceMappingURL=index.cjs.map
